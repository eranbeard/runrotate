<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile - RunRotate</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="edit-profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="profile-edit-container">
            <div class="profile-edit-header">
                <h1>Tell the Community About Yourself</h1>
                <p class="subtitle">Add your bio, race history, and personal records to complete your profile.</p>
            </div>

            <form class="profile-edit-form">
                <!-- Profile Completion -->
                <div class="profile-completion">
                    <div class="completion-header">
                        <h3>Profile Completion</h3>
                        <span class="completion-percentage">25%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%;"></div>
                    </div>
                    <p class="completion-hint">Complete more sections to reach 100%</p>
                </div>
                
                <!-- Strava Connection -->
                <div class="form-section strava-connect">
                    <button type="button" class="btn-strava" id="connect-strava">
                        <svg class="strava-logo" viewBox="0 0 82 82" fill="#FC4C02" xmlns="http://www.w3.org/2000/svg">
                            <path d="M41.1 0C18.4 0 0 18.4 0 41.1S18.4 82 41.1 82C63.7 82 82 63.7 82 41.1 82 18.4 63.7 0 41.1 0zm0 76.9C21.7 76.9 5.9 60.5 5.9 41.1 5.9 21.7 21.7 5.9 41.1 5.9c19.4 0 35.1 15.8 35.1 35.2 0 19.4-15.7 35.8-35.1 35.8z"/>
                            <path d="M54.6 49.1l-6.1-11.5-6.1 11.5h-5.4l9.8-18.6h6.5l9.8 18.6h-6.5zM47.4 33.8l-2.5-5.2-2.5 5.2h5z"/>
                        </svg>
                        Connect to Strava
                    </button>
                    <p class="strava-description">Connect RunRotate with your Strava profile for automatic shoe mileage logging, average weekly running stats and more.</p>
                </div>

                <!-- Profile Photo -->
                <div class="form-section">
                    <h3>Profile Photo</h3>
                    <div class="profile-photo-upload">
                        <div class="avatar-preview">
                            <img src="https://via.placeholder.com/150" alt="Profile" id="profile-photo-preview">
                            <div class="upload-overlay">
                                <i class="fas fa-camera"></i>
                                <span>Upload</span>
                            </div>
                        </div>
                        <div class="upload-actions">
                            <button type="button" class="ghost-button" id="upload-photo">Upload Profile Photo</button>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Your Details</h3>
                    <div class="form-group">
                        <label for="first-name" class="form-label">First Name</label>
                        <input type="text" id="first-name" class="form-input" value="Jane" required>
                    </div>

                    <div class="form-group">
                        <label for="last-name" class="form-label">Last Name</label>
                        <input type="text" id="last-name" class="form-input" value="Smith" required>
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" id="email" class="form-input" value="jane@example.com" required>
                    </div>

                    <div class="form-group">
                        <label for="country" class="form-label">Country</label>
                        <select id="country" class="form-select" required>
                            <option value="">Select a country</option>
                            <option value="US" selected>United States</option>
                            <option value="GB">United Kingdom</option>
                            <option value="AU">Australia</option>
                            <option value="CA">Canada</option>
                            <option value="NZ">New Zealand</option>
                            <!-- Add more countries as needed -->
                        </select>
                    </div>
                </div>



                <!-- Bio -->
                <div class="form-section">
                    <h3>Your Bio</h3>
                    <div class="form-group full-width">
                        <textarea id="bio" class="form-textarea" rows="4" placeholder="e.g. Recreational runner based in Melbourne, mostly logging road miles with the occasional trail adventure. Training for my second half marathon."></textarea>
                    </div>
                </div>

                <!-- Average Weekly -->
                <div class="form-section">
                    <label for="weekly-distance" class="form-label">How much do you run per week? <span class="unit-display">(km)</span></label>
                    <input type="number" id="weekly-distance" class="form-input" min="0" step="0.1">
                </div>

                <!-- Running Badges -->
                <div class="form-section badges-section">
                    <h3>Select Your Badges</h3>
                    <p class="section-description">What kind of runner are you? Select all that apply - these will be displayed on your profile.</p>
                    <div class="badges-grid">
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="road">
                            <span class="badge-label">Road Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="trail">
                            <span class="badge-label">Trail Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="ultra">
                            <span class="badge-label">Ultra Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="track">
                            <span class="badge-label">Track Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="marathon">
                            <span class="badge-label">Marathoner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="sprinter">
                            <span class="badge-label">Sprinter</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="parkrun">
                            <span class="badge-label">Parkrunner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="hurdles">
                            <span class="badge-label">Hurdler</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="relay">
                            <span class="badge-label">Relay Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="cross-country">
                            <span class="badge-label">Cross Country</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="obstacle">
                            <span class="badge-label">Obstacle Course</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="trail-ultra">
                            <span class="badge-label">Trail Ultra</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="road-ultra">
                            <span class="badge-label">Road Ultra</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="mountain">
                            <span class="badge-label">Mountain Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="adventure">
                            <span class="badge-label">Adventure Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="everyday">
                            <span class="badge-label">Everyday Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="treadmill">
                            <span class="badge-label">Treadmill Warrior</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="coach">
                            <span class="badge-label">Coach</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="pacer">
                            <span class="badge-label">Pacer</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="beginner">
                            <span class="badge-label">Beginner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="weekend">
                            <span class="badge-label">Weekend Warrior</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="social">
                            <span class="badge-label">Social Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="club">
                            <span class="badge-label">Club Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="triathlete">
                            <span class="badge-label">Triathlete</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="comeback">
                            <span class="badge-label">Comeback Runner</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="treadmill">
                            <span class="badge-label">Treadmill Warrior</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="coach">
                            <span class="badge-label">Coach</span>
                        </label>
                        <label class="badge-option">
                            <input type="checkbox" name="focus" value="pacer">
                            <span class="badge-label">Pacer</span>
                        </label>
                    </div>
                </div>

                <!-- Personal Bests -->
                <div class="form-section personal-bests">
                    <div class="section-header">
                        <h3>Personal Bests</h3>
                        <button type="button" class="btn-text" id="add-pr">+ Add Custom Distance</button>
                    </div>
                    <div class="pr-list">
                        <div class="pr-item">
                            <select class="form-select pr-distance">
                                <option value="5k">5K</option>
                                <option value="10k">10K</option>
                                <option value="half">Half Marathon</option>
                                <option value="marathon">Marathon</option>
                                <option value="50k">50K</option>
                                <option value="100k">100K</option>
                                <option value="half-ironman">Half Ironman</option>
                                <option value="ironman">Ironman</option>
                            </select>
                            <input type="text" class="form-input pr-time" placeholder="HH:MM:SS">
                            <button type="button" class="btn-icon" title="Remove">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Events -->
                <div class="form-section recent-events">
                    <h3>Recent Events</h3>
                    <div class="event-list">
                        <div class="event-item">
                            <div class="event-grid">
                                <div class="form-group">
                                    <label>Event Name</label>
                                    <input type="text" class="form-input" placeholder="e.g., Boston Marathon">
                                </div>
                                <div class="form-group">
                                    <label>Location</label>
                                    <input type="text" class="form-input" placeholder="e.g., Boston, MA">
                                </div>
                                <div class="form-group">
                                    <label>Date</label>
                                    <input type="date" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label>Distance <span class="unit-display">(km)</span></label>
                                    <input type="number" class="form-input" min="0" step="0.1">
                                </div>
                                <div class="form-group full-width">
                                    <label>Notes (Optional)</label>
                                    <textarea class="form-input" rows="2" placeholder="Any personal notes about this event"></textarea>
                                </div>
                            </div>
                            <button type="button" class="btn-icon remove-event" title="Remove event">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <button type="button" class="btn-text" id="add-event">
                        <i class="fas fa-plus"></i> Add Another Event
                    </button>
                </div>

                <!-- Goals -->
                <div class="form-section goals">
                    <label for="goals" class="form-label">Goals</label>
                    <textarea id="goals" class="form-textarea" rows="4" placeholder="What are your running goals? (e.g., Run a sub-4 hour marathon, Complete an ultra, Run 3 times a week)"></textarea>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Units Toggle
        const unitOptions = document.querySelectorAll('.unit-option');
        unitOptions.forEach(option => {
            option.addEventListener('click', () => {
                unitOptions.forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
                
                // Update all unit displays
                const unit = option.dataset.unit === 'km' ? 'km' : 'mi';
                document.querySelectorAll('.unit-display').forEach(el => {
                    el.textContent = `(${unit})`;
                });
            });
        });

        // Set default unit based on country
        const countrySelect = document.getElementById('country');
        const setDefaultUnit = () => {
            const milesCountries = ['US', 'GB', 'LR'];
            const shouldUseMiles = milesCountries.includes(countrySelect.value);
            const targetUnit = shouldUseMiles ? 'mi' : 'km';
            
            document.querySelectorAll('.unit-option').forEach(opt => {
                opt.classList.toggle('active', opt.dataset.unit === targetUnit);
            });
            
            document.querySelectorAll('.unit-display').forEach(el => {
                el.textContent = `(${targetUnit})`;
            });
        };
        
        countrySelect.addEventListener('change', setDefaultUnit);
        setDefaultUnit(); // Initialize

        // Add PR
        document.getElementById('add-pr').addEventListener('click', () => {
            const prList = document.querySelector('.pr-list');
            const newPr = document.createElement('div');
            newPr.className = 'pr-item';
            newPr.innerHTML = `
                <select class="form-select pr-distance">
                    <option value="5k">5K</option>
                    <option value="10k">10K</option>
                    <option value="half">Half Marathon</option>
                    <option value="marathon">Marathon</option>
                    <option value="50k">50K</option>
                    <option value="100k">100K</option>
                    <option value="half-ironman">Half Ironman</option>
                    <option value="ironman">Ironman</option>
                </select>
                <input type="text" class="form-input pr-time" placeholder="HH:MM:SS">
                <button type="button" class="btn-icon" title="Remove">
                    <i class="fas fa-times"></i>
                </button>
            `;
            prList.appendChild(newPr);
            
            // Add event listener to the new remove button
            newPr.querySelector('.btn-icon').addEventListener('click', () => {
                if (document.querySelectorAll('.pr-item').length > 1) {
                    newPr.remove();
                }
            });
        });

        // Add event
        document.getElementById('add-event').addEventListener('click', () => {
            const eventList = document.querySelector('.event-list');
            const newEvent = document.createElement('div');
            newEvent.className = 'event-item';
            newEvent.innerHTML = `
                <div class="event-grid">
                    <div class="form-group">
                        <label>Event Name</label>
                        <input type="text" class="form-input" placeholder="e.g., Boston Marathon">
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" class="form-input" placeholder="e.g., Boston, MA">
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Distance <span class="unit-display">(km)</span></label>
                        <input type="number" class="form-input" min="0" step="0.1">
                    </div>
                    <div class="form-group full-width">
                        <label>Notes (Optional)</label>
                        <textarea class="form-input" rows="2" placeholder="Any personal notes about this event"></textarea>
                    </div>
                </div>
                <button type="button" class="btn-icon remove-event" title="Remove event">
                    <i class="fas fa-times"></i>
                </button>
            `;
            eventList.appendChild(newEvent);
            
            // Add event listener to the remove button
            newEvent.querySelector('.remove-event').addEventListener('click', () => {
                newEvent.remove();
            });
        });

        // Remove event
        document.addEventListener('click', (e) => {
            if (e.target.closest('.remove-event') || e.target.classList.contains('remove-event')) {
                const eventItem = e.target.closest('.event-item');
                if (eventItem && document.querySelectorAll('.event-item').length > 1) {
                    eventItem.remove();
                }
            }
        });

        // Profile photo upload (simplified example)
        document.getElementById('upload-photo').addEventListener('click', () => {
            // In a real app, this would open a file picker
            console.log('Open file picker to upload photo');
        });

        document.getElementById('edit-photo').addEventListener('click', () => {
            // In a real app, this would open a file picker or photo editor
            console.log('Open photo editor');
        });

        // Connect to Strava
        document.getElementById('connect-strava').addEventListener('click', () => {
            // In a real app, this would initiate OAuth flow
            console.log('Connect to Strava');
        });
    </script>
    <script src="edit-profile.js"></script>
    <script src="profile-completion.js"></script>
</body>
</html>
